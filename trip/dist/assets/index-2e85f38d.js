import{v as me,x as Se,y as je,z as He,A as Ke,B as le,C as Ie,D as J,E as ae,G as Ye,H as re,J as Te,e as P,K as we,n as O,L as ye,M as Ge,l as de,N as X,o as Ae,O as fe,f as o,P as Ue,Q as qe,R as W,S as be,T as Xe,U as ie,I as oe,V as Je,W as Ee,h as Ze,X as Qe,Y as se,F as G,Z as Re,$ as et,a0 as tt,a1 as nt,a2 as at,a3 as it,a4 as ot,a5 as ge,a6 as he,a7 as lt,a8 as rt,_ as Ve,a as w,c as $,w as j,a9 as st,i as ct,g as ne,u as q,m as xe,b as ut,t as dt,j as ft,r as gt}from"./index-8848ccae.js";import{N as ht}from"./index-7c26babc.js";import{c as mt,C as Be}from"./index-82b84b0c.js";import{u as _t}from"./use-id-541d6243.js";import{u as _e,a as vt}from"./index-6f717f01.js";import{u as yt}from"./cityStore-9e5dd2cf.js";import{T as bt,a as xt}from"./index-58a5dddd.js";function Le(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function pt(e,a){if(Le(e)){if(a.required)return!1;if(a.validateEmpty===!1)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}function Ct(e,a){return new Promise(n=>{const r=a.validator(e,a);if(He(r)){r.then(n);return}n(r)})}function pe(e,a){const{message:n}=a;return Ke(n)?n(e,a):n||""}function kt({target:e}){e.composing=!0}function Ce({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function St(e,a){const n=me();e.style.height="auto";let r=e.scrollHeight;if(je(a)){const{maxHeight:i,minHeight:l}=a;i!==void 0&&(r=Math.min(r,i)),l!==void 0&&(r=Math.max(r,l))}r&&(e.style.height=`${r}px`,Se(n))}function It(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function M(e){return[...e].length}function ce(e,a){return[...e].slice(0,a).join("")}const[Tt,S]=le("field"),wt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:J,formatter:Function,clearIcon:ae("clear"),modelValue:Ue(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:ae("focus"),formatTrigger:ae("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},At=Ie({},mt,wt,{rows:J,type:ae("text"),rules:Array,autosize:[Boolean,Object],labelWidth:J,labelClass:Ye,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Et=re({name:Tt,props:At,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:n}){const r=_t(),i=Te({status:"unvalidated",focused:!1,validateMessage:""}),l=P(),k=P(),m=P(),{parent:c}=we(qe),v=()=>{var t;return String((t=e.modelValue)!=null?t:"")},d=t=>{if(W(e[t]))return e[t];if(c&&W(c.props[t]))return c.props[t]},U=O(()=>{const t=d("readonly");if(e.clearable&&!t){const u=v()!=="",s=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return u&&s}return!1}),H=O(()=>m.value&&n.input?m.value():e.modelValue),K=t=>t.reduce((u,s)=>u.then(()=>{if(i.status==="failed")return;let{value:g}=H;if(s.formatter&&(g=s.formatter(g,s)),!pt(g,s)){i.status="failed",i.validateMessage=pe(g,s);return}if(s.validator)return Le(g)&&s.validateEmpty===!1?void 0:Ct(g,s).then(_=>{_&&typeof _=="string"?(i.status="failed",i.validateMessage=_):_===!1&&(i.status="failed",i.validateMessage=pe(g,s))})}),Promise.resolve()),x=()=>{i.status="unvalidated",i.validateMessage=""},N=()=>a("endValidate",{status:i.status,message:i.validateMessage}),B=(t=e.rules)=>new Promise(u=>{x(),t?(a("startValidate"),K(t).then(()=>{i.status==="failed"?(u({name:e.name,message:i.validateMessage}),N()):(i.status="passed",u(),N())})):u()}),A=t=>{if(c&&e.rules){const{validateTrigger:u}=c.props,s=be(u).includes(t),g=e.rules.filter(_=>_.trigger?be(_.trigger).includes(t):s);g.length&&B(g)}},z=t=>{var u;const{maxlength:s}=e;if(W(s)&&M(t)>+s){const g=v();if(g&&M(g)===+s)return g;const _=(u=l.value)==null?void 0:u.selectionEnd;if(i.focused&&_){const C=[...t],T=C.length-+s;return C.splice(_-T,T),C.join("")}return ce(t,+s)}return t},E=(t,u="onChange")=>{const s=t;t=z(t);const g=M(s)-M(t);if(e.type==="number"||e.type==="digit"){const C=e.type==="number";t=Xe(t,C,C)}let _=0;if(e.formatter&&u===e.formatTrigger){const{formatter:C,maxlength:T}=e;if(t=C(t),W(T)&&M(t)>+T&&(t=ce(t,+T)),l.value&&i.focused){const{selectionEnd:te}=l.value,ve=ce(s,te);_=M(C(ve))-M(ve)}}if(l.value&&l.value.value!==t)if(i.focused){let{selectionStart:C,selectionEnd:T}=l.value;if(l.value.value=t,W(C)&&W(T)){const te=M(t);g?(C-=g,T-=g):_&&(C+=_,T+=_),l.value.setSelectionRange(Math.min(C,te),Math.min(T,te))}}else l.value.value=t;t!==e.modelValue&&a("update:modelValue",t)},Z=t=>{t.target.composing||E(t.target.value)},Y=()=>{var t;return(t=l.value)==null?void 0:t.blur()},Q=()=>{var t;return(t=l.value)==null?void 0:t.focus()},D=()=>{const t=l.value;e.type==="textarea"&&e.autosize&&t&&St(t,e.autosize)},f=t=>{i.focused=!0,a("focus",t),X(D),d("readonly")&&Y()},h=t=>{i.focused=!1,E(v(),"onBlur"),a("blur",t),!d("readonly")&&(A("onBlur"),X(D),Qe())},y=t=>a("clickInput",t),p=t=>a("clickLeftIcon",t),b=t=>a("clickRightIcon",t),R=t=>{ie(t),a("update:modelValue",""),a("clear",t)},L=O(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&i.status==="failed")return!0}),V=O(()=>{const t=d("labelWidth"),u=d("labelAlign");if(t&&u!=="top")return{width:ye(t)}}),I=t=>{t.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&ie(t),e.type==="search"&&Y()),a("keypress",t)},ee=()=>e.id||`${r}-input`,F=()=>i.status,Pe=()=>{const t=S("control",[d("inputAlign"),{error:L.value,custom:!!n.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(n.input)return o("div",{class:t,onClick:y},[n.input()]);const u={id:ee(),ref:l,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:d("disabled"),readonly:d("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${r}-label`:void 0,onBlur:h,onFocus:f,onInput:Z,onClick:y,onChange:Ce,onKeypress:I,onCompositionend:Ce,onCompositionstart:kt};return e.type==="textarea"?o("textarea",u,null):o("input",Ee(It(e.type),u),null)},Oe=()=>{const t=n["left-icon"];if(e.leftIcon||t)return o("div",{class:S("left-icon"),onClick:p},[t?t():o(oe,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ne=()=>{const t=n["right-icon"];if(e.rightIcon||t)return o("div",{class:S("right-icon"),onClick:b},[t?t():o(oe,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ze=()=>{if(e.showWordLimit&&e.maxlength){const t=M(v());return o("div",{class:S("word-limit")},[o("span",{class:S("word-num")},[t]),Ze("/"),e.maxlength])}},De=()=>{if(c&&c.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const u=n["error-message"],s=d("errorMessageAlign");return o("div",{class:S("error-message",s)},[u?u({message:t}):t])}},Fe=()=>{const t=d("labelWidth"),u=d("labelAlign"),s=d("colon")?":":"";if(n.label)return[n.label(),s];if(e.label)return o("label",{id:`${r}-label`,for:n.input?void 0:ee(),onClick:g=>{ie(g),Q()},style:u==="top"&&t?{width:ye(t)}:void 0},[e.label+s])},We=()=>[o("div",{class:S("body")},[Pe(),U.value&&o(oe,{ref:k,name:e.clearIcon,class:S("clear")},null),Ne(),n.button&&o("div",{class:S("button")},[n.button()])]),ze(),De()];return _e({blur:Y,focus:Q,validate:B,formValue:H,resetValidation:x,getValidationStatus:F}),Ge(Je,{customValue:m,resetValidation:x,validateWithTrigger:A}),de(()=>e.modelValue,()=>{E(v()),x(),A("onChange"),X(D)}),Ae(()=>{E(v(),e.formatTrigger),X(D)}),fe("touchstart",R,{target:O(()=>{var t;return(t=k.value)==null?void 0:t.$el})}),()=>{const t=d("disabled"),u=d("labelAlign"),s=Oe(),g=()=>{const _=Fe();return u==="top"?[s,_].filter(Boolean):_||[]};return o(Be,{size:e.size,class:S({error:L.value,disabled:t,[`label-${u}`]:u}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:V.value,valueClass:S("value"),titleClass:[S("label",[u,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:s&&u!=="top"?()=>s:null,title:g,value:We,extra:n.extra})}}});const Rt=se(Et),[Vt,ke]=le("cell-group"),Bt={title:String,inset:Boolean,border:Re};var Lt=re({name:Vt,inheritAttrs:!1,props:Bt,setup(e,{slots:a,attrs:n}){const r=()=>{var l;return o("div",Ee({class:[ke({inset:e.inset}),{[et]:e.border&&!e.inset}]},n),[(l=a.default)==null?void 0:l.call(a)])},i=()=>o("div",{class:ke("title",{inset:e.inset})},[a.title?a.title():e.title]);return()=>e.title||a.title?o(G,null,[i(),r()]):r()}});const Mt=se(Lt);function $t(){const e="A".charCodeAt(0);return Array(26).fill("").map((n,r)=>String.fromCharCode(e+r))}const[Me,ue]=le("index-bar"),Pt={sticky:Re,zIndex:J,teleport:[String,Object],highlightColor:String,stickyOffsetTop:it(0),indexList:{type:Array,default:$t}},$e=Symbol(Me);var Ot=re({name:Me,props:Pt,emits:["select","change"],setup(e,{emit:a,slots:n}){const r=P(),i=P(),l=P(""),k=vt(),m=tt(r),{children:c,linkChildren:v}=nt($e);let d;v({props:e});const U=O(()=>{if(W(e.zIndex))return{zIndex:+e.zIndex+1}}),H=O(()=>{if(e.highlightColor)return{color:e.highlightColor}}),K=(f,h)=>{for(let y=c.length-1;y>=0;y--){const p=y>0?h[y-1].height:0,b=e.sticky?p+e.stickyOffsetTop:0;if(f+b>=h[y].top)return y}return-1},x=f=>c.find(h=>String(h.index)===f),N=()=>{if(ot(r))return;const{sticky:f,indexList:h}=e,y=ge(m.value),p=he(m),b=c.map(L=>L.getRect(m.value,p));let R=-1;if(d){const L=x(d);if(L){const V=L.getRect(m.value,p);R=K(V.top,b)}}else R=K(y,b);l.value=h[R],f&&c.forEach((L,V)=>{const{state:I,$el:ee}=L;if(V===R||V===R-1){const F=ee.getBoundingClientRect();I.left=F.left,I.width=F.width}else I.left=null,I.width=null;if(V===R)I.active=!0,I.top=Math.max(e.stickyOffsetTop,b[V].top-y)+p.top;else if(V===R-1&&d===""){const F=b[R].top-y;I.active=F>0,I.top=F+p.top-b[V].height}else I.active=!1}),d=""},B=()=>{X(N)};fe("scroll",N,{target:m,passive:!0}),Ae(B),de(()=>e.indexList,B),de(l,f=>{f&&a("change",f)});const A=()=>e.indexList.map(f=>{const h=f===l.value;return o("span",{class:ue("index",{active:h}),style:h?H.value:void 0,"data-index":f},[f])}),z=f=>{d=String(f);const h=x(d);if(h){const y=ge(m.value),p=he(m),{offsetHeight:b}=document.documentElement;if(h.$el.scrollIntoView(),y===b-p.height){N();return}e.sticky&&e.stickyOffsetTop&&Se(me()-e.stickyOffsetTop),a("select",h.index)}},E=f=>{const{index:h}=f.dataset;h&&z(h)},Z=f=>{E(f.target)};let Y;const Q=f=>{if(k.move(f),k.isVertical()){ie(f);const{clientX:h,clientY:y}=f.touches[0],p=document.elementFromPoint(h,y);if(p){const{index:b}=p.dataset;b&&Y!==b&&(Y=b,E(p))}}},D=()=>o("div",{ref:i,class:ue("sidebar"),style:U.value,onClick:Z,onTouchstartPassive:k.start},[A()]);return _e({scrollTo:z}),fe("touchmove",Q,{target:i}),()=>{var f;return o("div",{ref:r,class:ue()},[e.teleport?o(at,{to:e.teleport},{default:()=>[D()]}):D(),(f=n.default)==null?void 0:f.call(n)])}}});const[Nt,zt]=le("index-anchor"),Dt={index:J};var Ft=re({name:Nt,props:Dt,setup(e,{slots:a}){const n=Te({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),r=P(),{parent:i}=we($e);if(!i)return;const l=()=>n.active&&i.props.sticky,k=O(()=>{const{zIndex:c,highlightColor:v}=i.props;if(l())return Ie(lt(c),{left:n.left?`${n.left}px`:void 0,width:n.width?`${n.width}px`:void 0,transform:n.top?`translate3d(0, ${n.top}px, 0)`:void 0,color:v})});return _e({state:n,getRect:(c,v)=>{const d=he(r);return n.rect.height=d.height,c===window||c===document.body?n.rect.top=d.top+me():n.rect.top=d.top+ge(c)-v.top,n.rect}}),()=>{const c=l();return o("div",{ref:r,style:{height:c?`${n.rect.height}px`:void 0}},[o("div",{style:k.value,class:[zt({sticky:c}),{[rt]:c}]},[a.default?a.default():e.index])])}}});const Wt=se(Ft),jt=se(Ot);const Ht={class:"app"},Kt={__name:"city_search_navBar",setup(e){const a=()=>{history.back()};return(n,r)=>{const i=oe,l=Rt,k=Mt,m=ht;return w(),$("div",Ht,[o(m,{title:"标题","left-text":"返回","left-arrow":"",onClickLeft:a},{right:j(()=>[o(i,{name:"search",size:"18"})]),title:j(()=>[o(k,{inset:""},{default:j(()=>[o(l,{placeholder:"请输入内容"})]),_:1})]),_:1})])}}},Yt=Ve(Kt,[["__scopeId","data-v-7184a165"]]);const Gt={class:"app"},Ut={class:"hot"},qt=["onClick"],Xt={__name:"city_search_list",setup(e){const a=yt(),{cityAll:n}=st(a);let r=P(0),i=P([]),l=0;ct(()=>{async function m(){await a.httpCityAll("http://codercba.com:1888/api/city/all"),console.log("city",n.value);for(let c in n.value){i.value[l]=[],i.value[l].push("#");for(let v of n.value[c].cities)i.value[l].push(v.group);l++}}m()});const k=m=>{a.cityName=m,gt.push("/")};return(m,c)=>{const v=Wt,d=Be,U=jt,H=bt,K=xt;return w(),$("div",Gt,[o(K,{active:q(r),"onUpdate:active":c[0]||(c[0]=x=>ft(r)?r.value=x:r=x),color:"#ff9645"},{default:j(()=>[(w(!0),$(G,null,ne(q(n),(x,N,B)=>(w(),xe(H,{title:x.title},{default:j(()=>[o(U,{"index-list":q(i)[B],"highlight-color":"#ff9645"},{default:j(()=>[o(v,{index:"#"}),o(d,null,{default:j(()=>[ut("div",Ut,[(w(!0),$(G,null,ne(x.hotCities,A=>(w(),$("div",{onClick:z=>k(A.cityName)},dt(A.cityName),9,qt))),256))])]),_:2},1024),(w(!0),$(G,null,ne(q(i)[B]?q(i)[B].slice(1):[],(A,z)=>(w(),$(G,null,[o(v,{index:A},null,8,["index"]),(w(!0),$(G,null,ne(x.cities[z].cities,E=>(w(),xe(d,{title:E.cityName,onClick:Z=>k(E.cityName)},null,8,["title","onClick"]))),256))],64))),256))]),_:2},1032,["index-list"])]),_:2},1032,["title"]))),256))]),_:1},8,["active"])])}}},Jt=Ve(Xt,[["__scopeId","data-v-6deed685"]]),Zt={class:"app"},rn={__name:"index",setup(e){return(a,n)=>(w(),$("div",Zt,[o(Yt),o(Jt)]))}};export{rn as default};
